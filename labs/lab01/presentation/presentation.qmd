---
# Preamble

## Author
author:
  name: Бызова Мария Олеговна
## Title
title: Отчет по лабораторной работе № 1
subtitle: Подготовка лабораторного стенда
license: CC BY
date: 2025-09-05

## Generic options
lang: ru-RU
crossref:
  lof-title: Список иллюстраций
  lot-title: Список таблиц
  lol-title: Листинги

## Fonts 
mainfont: PT Serif 
romanfont: PT Serif 
sansfont: PT Sans 
monofont: PT Mono 
mainfontoptions: Ligatures=TeX 
romanfontoptions: Ligatures=TeX 
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase 
monofontoptions: Scale=MatchLowercase,Scale=0.9

## Formats
format:
### Pdf output format
  beamer:
    toc: true
    toc-title: Содержание
    number-sections: true
    colorlinks: false
    toc-depth: 2
    slide_level: 2
    aspectratio: 169
    section-titles: true
    theme: metropolis
    themeoptions: progressbar=frametitle,sectionpage=progressbar,numbering=fraction
    pdf-engine: xelatex
    fontenc: T2A
#### Language
    babel-lang: russian
    babel-otherlangs: english

### Html output
  revealjs:
    transition: slide
    margin: 0.2
    smaller: false
    output-ext: html
    theme: beige
    logo: _resources/image/logo_rudn.png
---

## Цель работы

Целью данной работы является приобретение практических навыков установки Rocky Linux на виртуальную машину с помощью инструмента Vagrant.

# Выполнение лабораторной работы

## Подготовка рабочего каталога

Перед началом работы с Vagrant я создала каталог для проекта (рис. 1).

![Созданный каталог проекта](image/18.PNG){#fig-001 width=70%}

## Подготовка рабочего каталога

В созданном рабочем каталоге в подкаталоге packer разместила образ варианта операционной системы Rocky Linux (рис. 2).

![Каталог packer](image/19.PNG){#fig-002 width=70%}

## Подготовка рабочего каталога

В этом же рабочем каталоге разместила подготовленные заранее для работы с Vagrant файлы: в подкаталоге packer файл vagrant-rocky.pkr.hcl, в подкаталоге packer подкаталог http с файлом ks.cfg, в подкаталоге vagrant файл Vagrantfile. (рис. 3).

![Каталог vagrant](image/20.PNG){#fig-003 width=70%}

## Подготовка рабочего каталога

В этом же рабочем каталоге в подкаталоге vagrant создала каталог provision с подкаталогами default, server и client, в которых будут размещаться скрипты, изменяющие настройки внутреннего окружения базового (общего) образа виртуальной машины, сервера или клиента соответственно. (рис. 4).

![Каталог provision](image/21.PNG){#fig-004 width=70%}

## Подготовка рабочего каталога

В каталогах default, server и client разместила заранее подготовленный скрипт-заглушку 01-dummy.sh 

## Подготовка рабочего каталога

В каталоге default разместила заранее подготовленный скрипт 01-user.sh 

## Подготовка рабочего каталога

В каталоге default разместила заранее подготовленный скрипт 01-hostname.sh (рис. 5).

## Подготовка рабочего каталога

![Каталог default](image/22.PNG){#fig-005 width=70%}

## Подготовка рабочего каталога

В каталоге server разместила заранее подготовленный скрипт 02-forward.sh (рис. 6).

![Каталог server](image/23.PNG){#fig-006 width=70%}

## Подготовка рабочего каталога

В каталоге client разместила заранее подготовленный скрипт 01-routing.sh (рис. 7).

![Каталог client](image/24.PNG){#fig-007 width=70%} 

## Развёртывание лабораторного стенда на ОС Windows

Используя FAR, перешла в созданный рабочий каталог с проектом. В этом же каталоге должен быть размещён файл packer.exe. В командной строке ввела

packer.exe init vagrant-rocky.pkr.hcl (рис. 8).

![packer.exe init vagrant-rocky.pkr.hcl](image/2.PNG){#fig-008 width=70%}

## Развёртывание лабораторного стенда на ОС Windows

packer.exe build vagrant-rocky.pkr.hcl (рис. 9).

![packer.exe build vagrant-rocky.pkr.hcl](image/25.PNG){#fig-009 width=70%}

## Развёртывание лабораторного стенда на ОС Windows

Для регистрации образа виртуальной машины в vagrant в командной строке ввела (рис. 10).

vagrant box add rocky9 vagrant-virtualbox-rocky-9-x86_64.box

![Регистрация образа виртуальной машины](image/4.PNG){#fig-010 width=70%}

## Развёртывание лабораторного стенда на ОС Windows

Для запуска виртуальной машины Server ввела в консоли vagrant up server (рис. 11).

![Запуск виртуальной машины Server](image/5.PNG){#fig-011 width=70%}

## Развёртывание лабораторного стенда на ОС Windows

Для запуска виртуальной машины Client ввела в консоли vagrant up client (рис. 12).

![Запуск виртуальной машины Client](image/7.PNG){#fig-012 width=70%}

## Развёртывание лабораторного стенда на ОС Windows

Убедилась, что запуск обеих виртуальных машин прошёл успешно, залогинилась под пользователем vagrant с паролем vagrant в графическом окружении.

## Развёртывание лабораторного стенда на ОС Windows

Подключилась к серверу из консоли: vagrant ssh server. Ввела пароль vagrant (рис. 13).

![Подключение к серверу из консоли](image/9.PNG){#fig-013 width=70%}

## Развёртывание лабораторного стенда на ОС Windows

Перешла к пользователю mobihzova. Отлогинилась. Проделала то же самое для клиента. 

## Развёртывание лабораторного стенда на ОС Windows

Выключила обе виртуальные машины 

vagrant halt server (рис. 14).

![Отключение виртуальной машины сервер](image/10.PNG){#fig-014 width=70%}

## Развёртывание лабораторного стенда на ОС Windows

vagrant halt client (рис. 15).

![Отключение виртуальной машины клиент](image/11.PNG){#fig-015 width=70%}

## Внесение изменений в настройки внутреннего окружения виртуальной машины

Зафиксировала внесённые изменения для внутренних настроек виртуальных машин, введя в терминале:

vagrant up server --provision (рис. 16).

![Фиксирование внесённых изменений](image/12.PNG){#fig-016 width=70%}

## Внесение изменений в настройки внутреннего окружения виртуальной машины

vagrant up client --provision (рис. 17).

![Фиксирование внесённых изменений](image/13.PNG){#fig-017 width=70%}

## Внесение изменений в настройки внутреннего окружения виртуальной машины

Залогинилась на сервере и клиенте под созданным пользователем.

## Внесение изменений в настройки внутреннего окружения виртуальной машины

Выключила виртуальные машины.

vagrant halt server (рис. 18).

![Отключение виртуальной машины сервер](image/10.PNG){#fig-018 width=70%}

## Внесение изменений в настройки внутреннего окружения виртуальной машины

vagrant halt client (рис. 19).

![Отключение виртуальной машины клиент](image/11.PNG){#fig-019 width=70%}

## Внесение изменений в настройки внутреннего окружения виртуальной машины

После выключения виртуальных машин скопировала необходимые для работы с Vagrant файлы и box-файлы виртуальных машин на внешний носитель.

## Выводы

В рамках лабораторной работы познакомились с интструментом Vagrant и подготовили лабораторный стенд.

